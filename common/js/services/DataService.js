"use strict";angular.module("MetronicApp").factory("DataService",["$window","$q",function(e,o){var r=null,t=function(){var e=new Dexie("dataminer");return e.version(1).stores({collection:"++id, type, name, recipe_name, data, col_count, created_at"}),e.version(2).stores({collection:"++id, type, name, recipe_name, data, col_count, created_at",recipes:"id, type, name, data"}),(r=e).open()};return t(),{open:t,getCollectionNames:function(){var n=o.defer();if(null===r)n.reject("IndexDB is not opened yet!");else{var t=[];r.collection.orderBy("name").eachUniqueKey(function(e){t.push(e)}).then(function(){n.resolve(t)}).catch(function(e){console.error(e.stack||e),n.reject("Something went wrong!!!")})}return n.promise},getCollectionData:function(e){var n=o.defer();return null===r?n.reject("IndexDB is not opened yet!"):r.collection.where("name").equals(e).toArray(function(e){n.resolve(e)}).catch(function(e){console.error(e.stack||e),n.reject("Something went wrong!!!")}),n.promise},addCollection:function(e){var n=o.defer();return null===r?n.reject("IndexDB is not opened yet!"):Array.isArray(e)?r.collection.bulkAdd(e).then(function(){n.resolve()}).catch(function(e){console.error(e.stack||e),n.reject("Something went wrong!!!")}):r.collection.add(e).then(function(){n.resolve()}).catch(function(e){console.error(e.stack||e),n.reject("Something went wrong!!!")}),n.promise},deleteCollection:function(e){var n=o.defer();return null===r?n.reject("IndexDB is not opened yet!"):r.collection.where("name").equals(e).delete().then(function(){n.resolve()}).catch(function(e){console.error(e.stack||e),n.reject("Something went wrong!!!")}),n.promise},deleteCollectionAll:function(){var n=o.defer();return null===r?n.reject("IndexDB is not opened yet!"):r.delete().then(function(){t()}).then(function(){n.resolve()}).catch(function(e){console.error(e.stack||e),n.reject("Something went wrong!!!")}),n.promise}}}]);
//# sourceMappingURL=../../../../map/common/js/services/DataService.js.map