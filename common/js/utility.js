"use strict";var DM=DM||{};DM.utility={getDomain:function(e){var r=document.createElement("a");return r.href=e,{domain:r.host,pathname:r.pathname,url:e,protocol:r.protocol}},getTabPromise:function(t){var o=t.$q.defer();return chrome.tabs.query({active:!0,windowType:"normal",currentWindow:!0},function(e){var r;r=t.overrideUrl?DM.utility.getDomain(t.overrideUrl):DM.utility.getDomain(e[0].url),DM.testMode||0!==r.url.indexOf("chrome-extension")&&0!==r.url.indexOf("chrome://")&&0!==r.url.indexOf("https://chrome.google.com/webstore")?(t.tab=e[0],t.urlInfo=r,o.resolve(t)):(t.notice="Visit the website that you want to extract data from; then click on Data Miner icon in Chrome browser address bar to see all the Data Miner public recipes available that specific website.",o.reject(t))}),o.promise},pingPromise:function(r){var t=r.$q.defer(),e={command:"scraperPingTab",payload:{tab:r.tab.id}};return chrome.extension.sendRequest(e,function(e){!e||e.error||"I am here"!==e.result?confirm("Data Miner needs to reload this page before it can continue. Press OK to reload it now.")?(chrome.tabs.update(r.tab.id,{url:"javascript:window.location.reload()"}),t.resolve(r)):t.reject(new Error("Please reload the page.")):t.resolve(r)}),t.promise}};
//# sourceMappingURL=../../../map/common/js/utility.js.map